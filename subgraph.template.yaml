specVersion: 0.0.2
description: Cartesi Explorer
repository: "https://github.com/cartesi/cartesi-subgraph"
schema:
    file: ./schema.graphql
dataSources:
    - kind: ethereum/contract
      name: StakingImpl
      network:
      source:
          address: StakingImpl
          abi: StakingImpl
          startBlock:
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.4
          language: wasm/assemblyscript
          entities:
              - Staker
          abis:
              - name: StakingImpl
                file:
          eventHandlers:
              - event: "Stake(indexed uint256,indexed address,indexed uint256)"
                handler: handleStake
              - event: "Unstake(indexed uint256,indexed address,indexed uint256)"
                handler: handleUnstake
          file: ./src/user.ts
    - kind: ethereum/contract
      name: WorkerManager
      network:
      source:
          address: WorkerManagerImpl
          abi: WorkerManagerImpl
          startBlock:
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.4
          language: wasm/assemblyscript
          entities:
              - Staker
              - Worker
          abis:
              - name: WorkerManagerImpl
                file:
          eventHandlers:
              - event: "JobOffer(indexed address,indexed address)"
                handler: handleJobOffer
              - event: "JobAccepted(indexed address,indexed address)"
                handler: handleJobAccepted
              - event: "JobRejected(indexed address,indexed address)"
                handler: handleJobRejected
              - event: "Retired(indexed address,indexed address)"
                handler: handleRetired
          file: ./src/node.ts
    - kind: ethereum/contract
      name: WorkerAuthManager
      network:
      source:
          address: WorkerAuthManagerImpl
          abi: WorkerAuthManagerImpl
          startBlock:
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.4
          language: wasm/assemblyscript
          entities:
              - Staker
              - Worker
          abis:
              - name: WorkerAuthManagerImpl
                file:
          eventHandlers:
              - event: "Authorization(indexed address,indexed address,indexed address)"
                handler: handleAuthorization
              - event: "Deauthorization(indexed address,indexed address,indexed address)"
                handler: handleDeauthorization
          file: ./src/node.ts
    - kind: ethereum/contract
      name: PoS
      network:
      source:
          address: PoS
          abi: PoS
          startBlock:
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.4
          language: wasm/assemblyscript
          entities:
              - Block
              - Staker
              - Worker
          abis:
              - name: PoS
                file:
          eventHandlers:
              - event: "Rewarded(indexed uint256,indexed address,indexed address,address,uint256,uint256)"
                handler: handleRewarded
          file: ./src/block.ts
    - kind: ethereum/contract
      name: BlockSelector
      network:
      source:
          address: BlockSelector
          abi: BlockSelector
          startBlock:
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.4
          language: wasm/assemblyscript
          entities:
              - Block
              - Staker
              - Worker
          abis:
              - name: BlockSelector
                file:
          eventHandlers:
              - event: "BlockProduced(indexed uint256,indexed address,uint256,uint256,uint256,uint256)"
                handler: handleBlockProduced
          file: ./src/block.ts
